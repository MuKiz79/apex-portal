<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Daten Upload - APEX Executive</title>
    <style>
        body { padding: 40px; font-family: system-ui; background: #1a1a2e; color: #eee; max-width: 800px; margin: 0 auto; }
        .success { color: #4ade80; }
        .error { color: #f87171; }
        .info { color: #60a5fa; }
        button { background: #C6A87C; color: #1a1a2e; padding: 15px 30px; border: none; cursor: pointer; margin: 10px 5px; font-weight: bold; font-size: 16px; border-radius: 8px; }
        button:hover { background: #b09870; }
        button:disabled { background: #666; cursor: not-allowed; }
        #log { background: #0d0d1a; padding: 20px; border-radius: 8px; max-height: 400px; overflow-y: auto; margin-top: 20px; }
        h1 { color: #C6A87C; }
        .warning { background: #f59e0b22; border: 1px solid #f59e0b; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>APEX Executive - Daten Upload</h1>

    <div class="warning">
        <strong>WICHTIG:</strong> Diese Seite laedt Testdaten in Firestore. Nach dem Upload muessen die Firestore Rules wieder gesichert werden!
    </div>

    <div>
        <button onclick="uploadAllData()" id="uploadBtn">Alle Daten hochladen</button>
        <button onclick="testRead()">Daten testen</button>
    </div>

    <div id="log"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, doc, setDoc, getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBZ970mA7-2pJzhbxyFjjmzO97YKZhrSmU",
            authDomain: "apex-executive.firebaseapp.com",
            projectId: "apex-executive",
            storageBucket: "apex-executive.firebasestorage.app",
            messagingSenderId: "525553082138",
            appId: "1:525553082138:web:84d1437b2e150f5fb316a3"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const logEl = document.getElementById('log');

        function log(msg, type = 'info') {
            const p = document.createElement('p');
            p.className = type;
            p.innerHTML = `[${new Date().toLocaleTimeString()}] ${msg}`;
            logEl.appendChild(p);
            logEl.scrollTop = logEl.scrollHeight;
            console.log(msg);
        }

        // Sample Coaches Data
        const coaches = [
            {
                name: "Dr. Markus T.",
                role: "CIO @ DAX30",
                industry: "tech",
                price: 350,
                image: "https://randomuser.me/api/portraits/men/32.jpg",
                bio: "15 Jahre Erfahrung in globalen IT-Transformationen.",
                expertise: ["Strategy", "IT"],
                stats: "20y Exp",
                visible: true
            },
            {
                name: "Sarah L.",
                role: "VP Sales",
                industry: "tech",
                price: 350,
                image: "https://randomuser.me/api/portraits/women/44.jpg",
                bio: "Sales Expert fuer SaaS Scale-Ups.",
                expertise: ["Sales", "Growth"],
                stats: "100M Revenue",
                visible: true
            },
            {
                name: "Johannes B.",
                role: "CFO",
                industry: "finance",
                price: 400,
                image: "https://randomuser.me/api/portraits/men/85.jpg",
                bio: "Fokus auf M&A und Corporate Finance.",
                expertise: ["M&A", "Finance"],
                stats: "15 Deals",
                visible: true
            },
            {
                name: "Elena R.",
                role: "COO",
                industry: "automotive",
                price: 380,
                image: "https://randomuser.me/api/portraits/women/68.jpg",
                bio: "Operative Exzellenz in globalen Konzernen.",
                expertise: ["Operations", "Supply Chain", "Lean"],
                stats: "Global Teams",
                visible: true
            },
            {
                name: "Christian K.",
                role: "Ex-CTO",
                industry: "tech",
                price: 350,
                image: "https://randomuser.me/api/portraits/men/22.jpg",
                bio: "Tech-Strategie und Produktentwicklung fuer High-Growth Startups.",
                expertise: ["Tech Strategy", "Product", "Agile"],
                stats: "2 Exits",
                visible: true
            },
            {
                name: "Petra M.",
                role: "CHRO",
                industry: "finance",
                price: 350,
                image: "https://randomuser.me/api/portraits/women/33.jpg",
                bio: "Strategisches HR-Management und Talententwicklung.",
                expertise: ["HR Strategy", "Talent", "Culture"],
                stats: "30 Jahre Exp",
                visible: true
            }
        ];

        // Sample Articles Data
        const articles = [
            {
                title: "Die Kunst des Executive Brandings",
                excerpt: "Wie Fuehrungskraefte ihre persoenliche Marke aufbauen und pflegen koennen.",
                image: "https://images.unsplash.com/photo-1507679799987-c73779587ccf?w=600",
                date: "2024-12-15",
                author: "APEX Team",
                category: "Karriere"
            },
            {
                title: "Netzwerken auf C-Level",
                excerpt: "Strategien fuer effektives Networking in der obersten Fuehrungsebene.",
                image: "https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=600",
                date: "2024-12-10",
                author: "APEX Team",
                category: "Networking"
            },
            {
                title: "Der perfekte Lebenslauf fuer Executives",
                excerpt: "Was einen ueberzeugenden Executive CV ausmacht.",
                image: "https://images.unsplash.com/photo-1586281380349-632531db7ed4?w=600",
                date: "2024-12-05",
                author: "APEX Team",
                category: "CV"
            }
        ];

        // Settings Data
        const settings = {
            about: {
                imageUrl: "https://images.unsplash.com/photo-1507679799987-c73779587ccf?w=800",
                title: "APEX Executive",
                description: "Premium Executive Services fuer Ihre Karriere"
            },
            mentoring: {
                slotsText: "Nur noch 3 Plaetze verfuegbar"
            }
        };

        window.uploadAllData = async function() {
            const btn = document.getElementById('uploadBtn');
            btn.disabled = true;
            btn.textContent = 'Uploading...';

            log('=== Starting Data Upload ===', 'info');

            try {
                // Upload Coaches
                log('Uploading coaches...', 'info');
                for (let i = 0; i < coaches.length; i++) {
                    const coach = coaches[i];
                    const id = 'coach_' + (i + 1);
                    await setDoc(doc(db, 'coaches', id), coach);
                    log(`  Coach ${i + 1}/${coaches.length}: ${coach.name}`, 'success');
                }

                // Upload Articles
                log('Uploading articles...', 'info');
                for (let i = 0; i < articles.length; i++) {
                    const article = articles[i];
                    const id = 'article_' + (i + 1);
                    await setDoc(doc(db, 'articles', id), article);
                    log(`  Article ${i + 1}/${articles.length}: ${article.title}`, 'success');
                }

                // Upload Settings
                log('Uploading settings...', 'info');
                await setDoc(doc(db, 'settings', 'about'), settings.about);
                log('  settings/about uploaded', 'success');
                await setDoc(doc(db, 'settings', 'mentoring'), settings.mentoring);
                log('  settings/mentoring uploaded', 'success');

                log('=== ALL DATA UPLOADED SUCCESSFULLY ===', 'success');
                log('', 'info');
                log('WICHTIG: Jetzt muessen die Firestore Rules wieder gesichert werden!', 'error');

            } catch (e) {
                log(`ERROR: ${e.message}`, 'error');
            }

            btn.disabled = false;
            btn.textContent = 'Alle Daten hochladen';
        };

        window.testRead = async function() {
            log('=== Testing Data Read ===', 'info');

            try {
                // Test coaches
                const coachesSnap = await getDocs(collection(db, 'coaches'));
                log(`Coaches: ${coachesSnap.size} documents`, coachesSnap.size > 0 ? 'success' : 'error');

                // Test articles
                const articlesSnap = await getDocs(collection(db, 'articles'));
                log(`Articles: ${articlesSnap.size} documents`, articlesSnap.size > 0 ? 'success' : 'error');

                // Test settings
                const settingsSnap = await getDocs(collection(db, 'settings'));
                log(`Settings: ${settingsSnap.size} documents`, settingsSnap.size > 0 ? 'success' : 'error');

            } catch (e) {
                log(`ERROR: ${e.message}`, 'error');
            }
        };

        log('Ready - Click "Alle Daten hochladen" to upload sample data', 'info');
    </script>
</body>
</html>
